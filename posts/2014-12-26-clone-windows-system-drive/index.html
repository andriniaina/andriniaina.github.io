<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="I just bought a new SSD to replace my old HDD. I did not want to reinstall Windows because I did not want to lose all my settings and apps.
Some guides are available but none was completely satisfying. I tried to clone my drive using EaseUS ToDo Backup Free Tools but the process seemed to be stuck at some point, occupying 100% of my CPU. I would later learn that it cannot clone a drive with defective sectors." />
<meta name="keywords" content=", tooling, EN" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://andri.rocks/posts/2014-12-26-clone-windows-system-drive/" />


    <title>
        
            How to clone Windows to a new drive/partition :: Andri Rakotomalala  — Exercices de style
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.4d47f42ed7664c4ff52d3035fb624de3131ad1179b4c29db606e5997ef525366.css">






<meta itemprop="name" content="How to clone Windows to a new drive/partition">
<meta itemprop="description" content="I just bought a new SSD to replace my old HDD. I did not want to reinstall Windows because I did not want to lose all my settings and apps.
Some guides are available but none was completely satisfying. I tried to clone my drive using EaseUS ToDo Backup Free Tools but the process seemed to be stuck at some point, occupying 100% of my CPU. I would later learn that it cannot clone a drive with defective sectors.">
<meta itemprop="datePublished" content="2014-12-26T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2014-12-26T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="770">
<meta itemprop="image" content="http://andri.rocks"/>



<meta itemprop="keywords" content="tooling,EN," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://andri.rocks"/>

<meta name="twitter:title" content="How to clone Windows to a new drive/partition"/>
<meta name="twitter:description" content="I just bought a new SSD to replace my old HDD. I did not want to reinstall Windows because I did not want to lose all my settings and apps.
Some guides are available but none was completely satisfying. I tried to clone my drive using EaseUS ToDo Backup Free Tools but the process seemed to be stuck at some point, occupying 100% of my CPU. I would later learn that it cannot clone a drive with defective sectors."/>



    <meta property="og:title" content="How to clone Windows to a new drive/partition" />
<meta property="og:description" content="I just bought a new SSD to replace my old HDD. I did not want to reinstall Windows because I did not want to lose all my settings and apps.
Some guides are available but none was completely satisfying. I tried to clone my drive using EaseUS ToDo Backup Free Tools but the process seemed to be stuck at some point, occupying 100% of my CPU. I would later learn that it cannot clone a drive with defective sectors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://andri.rocks/posts/2014-12-26-clone-windows-system-drive/" />
<meta property="og:image" content="http://andri.rocks"/>
<meta property="article:published_time" content="2014-12-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2014-12-26T00:00:00+00:00" /><meta property="og:site_name" content="Andri Rakotomalala" />






    <meta property="article:published_time" content="2014-12-26 00:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
        <span class="logo__mark">~</span>
        <span class="logo__text" style="white-space: nowrap; text-overflow: ellipsis; max-width: 30em; overflow: hidden;">andri.rocks://posts/2014-12-26-clone-windows-system-drive/</span>
        <span class="logo__text">&gt;</span>
        <span class="logo__cursor" style="
                   
                   ">
            </span> 
    </div>
</a>

        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="http://andri.rocks/posts">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>4 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="http://andri.rocks/posts/2014-12-26-clone-windows-system-drive/">How to clone Windows to a new drive/partition</a>
            </h1>

            

            <div class="post-content">
                <p>I just bought a new SSD to replace my old HDD. I did not want to reinstall Windows because I did not want to lose all my settings and apps.</p>
<p>Some <a href="http://lifehacker.com/5837543/how-to-migrate-to-a-solid-state-drive-without-reinstalling-windows">guides</a> are available but none was completely satisfying. I tried to clone my drive using <a href="http://www.easeus.com/backup-software/tb-free.html">EaseUS ToDo Backup Free Tools</a> but the process seemed to be stuck at some point, occupying 100% of my CPU. I would later learn that it cannot clone a drive with defective sectors. Also, the software is apparently throttled in order to encourage people to buy the faster non-free version.</p>
<p>So, I just spent 2 days reading blogs, forum posts, technet articles, cloning/copying/repairing my system.
Here are the steps if you want to do the same things as me.</p>
<ol>
<li>Using <a href="http://unetbootin.sourceforge.net/">Unetbootin</a>, install <a href="http://clonezilla.org/">CloneZilla Live</a> on the same bootable drive as Windows.</li>
<li>Reboot and clone the drive to the new SSD (see tutorials <a href="http://www.bing.com/search?q=clonezilla+tutorial&amp;setmkt=en-US">here</a>)
<ul>
<li>If you have bad sectors like me, you <strong>must</strong> use the expert mode and select the <code>rescue</code> option</li>
<li>You can select multiple partitions</li>
<li>If you are copying from one drive to another, chances are that both drives do not have the same sizes. In this case, select the <code>-k1</code> option. For some reason, this did not work for me (see below for fix). Note that this option is not in the same dialog as the <code>rescue</code> option.</li>
</ul>
</li>
</ol>
<p>Now the hard part: In my case, Clonezilla correctly cloned the partition but I did not clone the 100MB system partition (this partition is automatically created by Win8 and contains the boot files). Actually I was not even aware that an Win8 installation requires a separate 100MB system partition&hellip; Also, Clonezilla <em>cloned</em> my drive, meaning that it created a 70Gb partition that somehow occupies the whole capacity of the new drive&hellip;</p>
<ol start="3">
<li>Resize the cloned partition, using the <strong>old</strong> Windows installation. This step cannot be done with the disk tools from Microsoft. Windows will think that the new partition fully occupies the drive. I used <a href="http://www.easeus.com/partition-manager/epm-free.html">EaseUS Partition Manager Free</a>. I had to shrink the partition first and then re-expand it.</li>
<li>Now that you have more space on the new drive, create the system boot partition
<ul>
<li>Still in EaseUS, create an empty partition of 100MB</li>
</ul>
</li>
<li>Clone the old system partition to the new partition</li>
<li>Mount both drives (the new system partition and the new windows partition) respectively in <code>X:</code> and <code>Z:</code> (don&rsquo;t worry, these are just alias letters and will not be used in the new Windows installation. Windows uses only device ids. See below)</li>
<li>Edit the BCD (Boot Configuration Data) using <a href="http://www.boyans.net/DownloadVisualBCD.html">Visual BCD editor</a>
<ul>
<li>create a new OS entry, by copying the old loader information (you can use <code>bcdedit /copy {current} /d xxxxxx</code> in command line).</li>
<li>adapt the new entry: make it point to the new Windows partition (<code>Z:</code>). You need to change both the <code>ApplicationDevice</code> and <code>OSDevice</code> properties</li>
<li>copy the boot records to the new drive: in the menu, select <em>Repair &gt; Repair boot records</em> and <em>Repair &gt; Repair bcd</em>, each time selecting <code>X:</code> as the system partition and <code>z:\Windows</code> as the Windows installation folder.</li>
<li>again, don&rsquo;t worry about the X: and Z: drive names. Windows will remap the drives in the new OS.</li>
</ul>
</li>
<li>Reboot, select the new Windows, log in</li>
</ol>
<p>At this point, everything is probably fucked up because Windows does not care if you cloned the drive; Windows only uses the device ids and still assigned the old drive to the letter <code>C:</code>, which would be great&hellip; in other circumstances. The system boots but reads most system files from <code>C:</code> (the old partition) and everything point to <code>C:</code>. Your new partition probably was probably assigned to the letter <code>D:</code> or <code>E:</code>. <code>Explorer.exe</code> will keep crashing and restarting.</p>
<ol start="8">
<li>Now reboot in the <strong>old</strong> Windows again (The point of the previous step was just to create the correct drive ids in the new registry)</li>
<li>Reassign drive letters (you can&rsquo;t do this directly in the new Windows installation; you can&rsquo;t reassign the drive letter of the running windows partition):
<ul>
<li>Open <code>regedit</code></li>
<li>select the root node <code>HKEY_LOCAL_MACHINE</code></li>
<li>open the registry of the new Windows: select the menu <em>File &gt; Load hive&hellip;</em>, open the hive <code>Z:\Windows\System32\config\SYSTEM</code>, give it a temporary key name of you choice</li>
<li>in the new hive, you will need to edit the keys in <code>HKLM\SYSTEM\MountedDevices</code>; Delete the key <code>\DosDevices\C:</code>, rename <code>\DosDevices\L:</code> to <code>\DosDevices\C:</code> (where L: is the letter that windows automatically assigned to the new drive)</li>
</ul>
</li>
<li>Reboot in the <strong>new</strong> Windows</li>
<li>Enjoy</li>
</ol>
<blockquote>
<p><strong>Conclusion</strong>: You&rsquo;ve made it to here and survived :)  but you probably realize now that it was not worth it. It&rsquo;s just faster and easier to start with a fresh Windows installation&hellip;</p>
</blockquote>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="http://andri.rocks/tags/tooling">tooling</a></span><span class="tag"><a href="http://andri.rocks/tags/en">EN</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>770 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2014-12-26 01:00 &#43;0100</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="http://andri.rocks/posts/2015-11-09-csv-format-for-wcf-data-services-odata/">
                                <span class="button__icon">←</span>
                                <span class="button__text">CSV output formatter for WCF Data Services</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="http://andri.rocks/posts/2014-12-19-qr-code-accelerator-iexplore/">
                                <span class="button__text">QR code accelerator for Internet Explorer</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>  
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span> 
            <span> <a href="http://andri.rocks/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    
</footer>
            
        </div>

        




<script type="text/javascript" src="/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" integrity="sha512-3HFukJLJggt3&#43;W2ilNASCu6xibW86pdSMJ6&#43;on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script>



    </body>
</html>
